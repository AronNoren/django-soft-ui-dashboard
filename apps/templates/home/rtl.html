{% extends 'layouts/base.html' %}

{% block title %} Dashboard {% endblock title %}

<!-- Specific CSS goes HERE -->
{% block stylesheets %}{% endblock stylesheets %}

{% block content %}

<!-- Create a container for the chart -->
<div class="row mt-4">
        <div class="col-lg-7 mb-lg-0 mb-4">
          <div class="card">
            <div class="card-body p-3">
              <div class="row">
                  <div class="d-flex flex-column h-100">
                    <div id="chart-container">
                     <canvas id="chart"></canvas>
                    </div>

                  </div>
              </div>
            </div>
          </div>
        </div>





      {% include "includes/footer.html" %}

    </div>

 {% endblock content %}

<!-- Specific JS goes HERE --> 
{% block javascripts %}
 <!--<script src="{{ ASSETS_ROOT }}/js/plugins/chartjs.min.js"></script> -->
 <script src="https://d3js.org/d3.v5.min.js"></script> 
 <script>

  // Set the dimensions of the chart
  var width = 500;
  var height = 300;

  // Set the margins of the chart
  var margin = {
    top: 20,
    right: 20,
    bottom: 30,
    left: 50
  };

  // Set the data for the chart'v

  var data = [
    { date: '2022-01-01', price: 10 },
    { date: '2022-01-02', price: 20 },
    { date: '2022-01-03', price: 30 },
    { date: '2022-01-04', price: 40 },
    { date: '2022-01-05', price: 50 }
  ];

  // Set the scales for the chart
 var x = d3.scaleTime()
  .range([0, width - margin.left - margin.right])
  .domain(d3.extent(data, d => d.date));
var y = d3.scaleLinear()
  .range([height - margin.top - margin.bottom, 0])
  .domain([0, d3.max(data, d => d.price)]);

// Create the chart container
var svg = d3.select('#chart')
  .append('svg')
  .attr('width', width)
  .attr('height', height)
  .append('g')
  .attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');

// Add the data to the chart
svg.selectAll('.dot')
  .data(data)
  .enter()
  .append('circle')
  .attr('class', 'dot')
  .attr('cx', d => x(d.date))
  .attr('cy', d => y(d.price))
  .attr('r', 5);

// Add the X-axis to the chart
svg.append('g')
  .attr('transform', 'translate(0,' + (height - margin.top - margin.bottom) + ')')
  .call(d3.axisBottom(x));

// Add the Y-axis to the chart
svg.append('g')
  .call(d3.axisLeft(y));
   

  </script>
{% endblock javascripts %}
