{% extends 'layouts/base.html' %}

{% block title %} Dashboard {% endblock title %}

<!-- Specific CSS goes HERE -->
{% block stylesheets %}{% endblock stylesheets %}

{% block content %}
<div class="card-body px-0 pb-2">
              <div class="table-responsive">        
                <table class="table align-items-center mb-0">
                  <thead>
                    <tr>
                      <th class="text-uppercase text-secondary text-xxs font-weight-bolder opacity-7">Token</th>
                      <th class="text-uppercase text-secondary text-xxs font-weight-bolder opacity-7 ps-2">Entry Price</th>
                      <th class="text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-7">Weight</th>
                      <th class="text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-7">Take Profit</th>
                      <th class="text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-7">Stop Loss</th>
                      <th class="text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-7">Current Position</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td>
                        <div class="d-flex px-2 py-1">
                          <div>
                            <img src="{{ ASSETS_ROOT }}/img/small-logos/logo-xd.svg" class="avatar avatar-sm me-3" alt="xd">
                          </div>
                          <div class="d-flex flex-column justify-content-center">
                            <h6 class="mb-0 text-sm" id = "r1name">BTC</h6>
                          </div>
                        </div>
                      </td>
                      <td>
                          <div class="d-flex flex-column justify-content-center">
                            <h6 class="mb-0 text-sm" id = "r1price">19,840-19,890</h6>
                          </div>
                      </td>
                      <td class="align-middle text-center text-sm">
                        <span class="text-xs font-weight-bold" id = "r1weight"> 5% </span>
                      </td>
                      <td class="align-middle">
                        <div class="progress-wrapper w-75 mx-auto">
                          <div class="progress-info">
                            <div class="progress-percentage">
                              <span class="text-xs font-weight-bold" id = "r1take">3%</span>
                            </div>
                          </div>
                          <div class="progress">
                            <div class="progress-bar bg-gradient-info w-60" role="progressbar" aria-valuenow="3%" aria-valuemin="-10%" aria-valuemax="8%"></div>
                          </div>
                        </div>
                      </td>
                      <td class="align-middle">
                        <div class="progress-wrapper w-75 mx-auto">
                          <div class="progress-info">
                            <div class="progress-percentage">
                              <span class="text-xs font-weight-bold" id = "r1stop">3%</span>
                            </div>
                          </div>
                          <div class="progress">
                            <div class="progress-bar bg-gradient-info w-60" role="progressbar" aria-valuenow="3%" aria-valuemin="-10%" aria-valuemax="8%"></div>
                          </div>
                        </div>
                      </td>
                       <td class="align-middle">
                        <div class="progress-wrapper w-75 mx-auto">
                          <div class="progress-info">
                            <div class="progress-percentage">
                              <span class="text-xs font-weight-bold" id = "r1current">3%</span>
                            </div>
                          </div>
                          <div class="progress">
                            <div class="progress-bar bg-gradient-info w-60" role="progressbar" aria-valuenow="3%" aria-valuemin="-10%" aria-valuemax="8%"></div>
                          </div>
                        </div>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <div class="d-flex px-2 py-1">
                          <div>
                            <img src="{{ ASSETS_ROOT }}/img/small-logos/logo-xd.svg" class="avatar avatar-sm me-3" alt="xd">
                          </div>
                          <div class="d-flex flex-column justify-content-center">
                            <h6 class="mb-0 text-sm" id = "r2name">BTC</h6>
                          </div>
                        </div>
                      </td>
                      <td>
                          <div class="d-flex flex-column justify-content-center">
                            <h6 class="mb-0 text-sm" id = "r2price">19,840-19,890</h6>
                          </div>
                      </td>
                      <td class="align-middle text-center text-sm">
                        <span class="text-xs font-weight-bold" id = "r2weight"> 5% </span>
                      </td>
                      <td class="align-middle">
                        <div class="progress-wrapper w-75 mx-auto">
                          <div class="progress-info">
                            <div class="progress-percentage">
                              <span class="text-xs font-weight-bold" id = "r2take">3%</span>
                            </div>
                          </div>
                          <div class="progress">
                            <div class="progress-bar bg-gradient-info w-60" role="progressbar" aria-valuenow="3%" aria-valuemin="-10%" aria-valuemax="8%"></div>
                          </div>
                        </div>
                      </td>
                      <td class="align-middle">
                        <div class="progress-wrapper w-75 mx-auto">
                          <div class="progress-info">
                            <div class="progress-percentage">
                              <span class="text-xs font-weight-bold" id = "r2stop">3%</span>
                            </div>
                          </div>
                          <div class="progress">
                            <div class="progress-bar bg-gradient-info w-60" role="progressbar" aria-valuenow="3%" aria-valuemin="-10%" aria-valuemax="8%"></div>
                          </div>
                        </div>
                      </td>
                       <td class="align-middle">
                        <div class="progress-wrapper w-75 mx-auto">
                          <div class="progress-info">
                            <div class="progress-percentage">
                              <span class="text-xs font-weight-bold" id = "r2current">3%</span>
                            </div>
                          </div>
                          <div class="progress">
                            <div class="progress-bar bg-gradient-info w-60" role="progressbar" aria-valuenow="3%" aria-valuemin="-10%" aria-valuemax="8%"></div>
                          </div>
                        </div>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
        <ul id="myList"></ul>
        <script>
            const modelName = 'books'
            const token = localStorage.getItem('token') || ''
   
            let displayList = [];
            let displayList_name = [];
            let displayList_returns = [];
            let displayList_cumprod = [];
            fetch('https://sea-lion-app-ydqoo.ondigitalocean.app/api/books/',{
             method: 'GET',
             headers: {
            'Authorization': `token ${token}`
             }
             })
            .then(function(response){
                return response.json()
            })
            .then((res) => {
                data = res.data
                
                var list = document.getElementById("myList");
                res.data.forEach((item) => {
                    displayList.push(item.coin);
                    displayList_name.push(item.coin);
                    displayList_returns.push(item.returns);
                    displayList_cumprod.push(item.cumprod);
                    let li = document.createElement("li");
                    li.innerText = item.coin;
                    list.appendChild(li);
                })
                document.getElementById("r1name").innerHTML = displayList_name[0];
                document.getElementById("r1current").innerHTML = displayList_cumprod[0];
                document.getElementById("r1name").innerHTML = displayList_name[1];
                document.getElementById("r1current").innerHTML = displayList_cumprod[1];
                console.log(displayList)
            })
            .catch((err) => {
                console.log(`Error fetching: ${err}`)
            });

             

        </script>
{% endblock content %}

<!-- Specific JS goes HERE --> 
{% block javascripts %}
  <script src="{{ ASSETS_ROOT }}/js/plugins/chartjs.min.js"></script>
  <script>
    const modelName = 'books'
        var diList = ['Apples', 'Oranges', 'Grapes', 'Beries', 'Watermelon'];
            const token = localStorage.getItem('token') || ''
   
            let displayList = ['Apples', 'Oranges', 'Grapes', 'Beries', 'Watermelon'];
            fetch('https://sea-lion-app-ydqoo.ondigitalocean.app/api/books/',{
             method: 'GET',
             headers: {
            'Authorization': `token ${token}`
             }
             })
            .then(function(response){
                return response.json()
            })
            .then((res) => {
                data = res.data
                let diList = ['Apples', 'Oranges', 'Grapes', 'Beries', 'Watermelon'];
                document.getElementById("r1name").innerHTML = diList[0];
                document.getElementById("r1price").innerHTML = diList[1];
                document.getElementById("r1weight").innerHTML = diList[2];
                document.getElementById("r1take").innerHTML = diList[3];
                document.getElementById("r1stop").innerHTML = diList[4];
                document.getElementById("r1current").innerHTML = "a";
                console.log(data)
            })
            .catch((err) => {
                console.log(`Error fetching: ${err}`)
            });
    
    
    
    
    

    <!--document.getElementById("r1name").innerHTML = diList[0];
    <!--document.getElementById("r1price").innerHTML = diList[1];
    <!--document.getElementById("r1weight").innerHTML = diList[2];
    <!--document.getElementById("r1take").innerHTML = diList[3];
    <!--document.getElementById("r1stop").innerHTML = diList[4];
    <!--document.getElementById("r1current").innerHTML = "a";
    <!--        const modelName = 'books'
    <!--        const token = localStorage.getItem('token') || ''
   
    <!--        let displayList = ['Apples', 'Oranges', 'Grapes', 'Beries', 'Watermelon'];
    <!--        fetch('https://sea-lion-app-ydqoo.ondigitalocean.app/api/books/',{
    <!--         method: 'GET',
    <!--         headers: {
    <!--        'Authorization': `token ${token}`
    <!--         }
    <!--         })
    <!--        .then(function(response){
    <!--            return response.json()
    <!--        })
    <!--        .then((res) => {
    <!--            data = res.data
    <!--            
    <!--            document.getElementById("r1name").innerHTML = "A";
    <!--            document.getElementById("r1price").innerHTML = "1";
    <!--            document.getElementById("r1weight").innerHTML = "1";
    <!--            document.getElementById("r1take").innerHTML = "a";
    <!--            document.getElementById("r1stop").innerHTML = "b";
    <!--            document.getElementById("r1current").innerHTML = "a";
    <!--        })
    <!--        .catch((err) => {
    <!--            console.log(`Error fetching: ${err}`)
    <!--        });



  </script>
{% endblock javascripts %}
